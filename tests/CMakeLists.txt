cmake_minimum_required(VERSION 3.5.0)
project(mcmComplier VERSION 0.0.1)

enable_testing()
include_directories(${GTEST_INCLUDE_DIRS})

#set(CMAKE_BINARY_DIR ${CMAKE_SOURCE_DIR}/bin)
#set(EXECUTABLE_OUTPUT_PATH ${CMAKE_BINARY_DIR})
#add_executable(graph_container graph_container.cpp ${graph})
#include_directories(include/mcm/graph)

file(GLOB base_src
    "base/*.cpp"
)

file(GLOB op_src
    "op/*.cpp"
)

file(GLOB pass_src
    "pass/*.cpp"
)

file(GLOB compiler_src
    "compiler/*.cpp"
)

file(GLOB model_src
    "model/*.cpp"
)

file(GLOB graph_src
    "graph/*.cpp"
)

file(GLOB resources
    "resources/*.cpp"
)

file(GLOB tensor
    "tensor/*.cpp"
)

file(GLOB nce1
    "nce1/*.cpp"
)

file(GLOB hw
    "hw/*.cpp"
)

file(GLOB deployer_src
    "deployer/*.cpp"
)
add_executable(mcm_unit_tests
    mcm_unit_tests.cpp
    #${nce1}
    #${hw}
    ${graph_src}
    ${resources}
    ${base_src}
    ${tensor}
    ${op_src}
    ${pass_src}
    ${compiler_src}
    ${model_src}
    ${deployer_src}
)

target_link_libraries (mcm_unit_tests gtest m)
target_link_libraries(mcm_unit_tests cm)
target_link_libraries(mcm_unit_tests dep)

set(CMAKE_CXX_IMPLICIT_LINK_LIBRARIES stdc++)
set(CMAKE_CXX_IMPLICIT_LINK_DIRECTORIES "")
set_target_properties(mcm_unit_tests PROPERTIES LINKER_LANGUAGE C)
