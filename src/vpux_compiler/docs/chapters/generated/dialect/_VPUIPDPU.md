<!-- Autogenerated by mlir-tblgen; don't manually edit -->
# 'VPUIPDPU' Dialect

VPU NN DPU Execution RunTime Dialect
The **VPUIPDPU Dialect** represents NN DPU RunTime IR in terms of MLIR framework.

It specializes the NN IR describing the DPU configuration to a hierarchy of modular operations,
based on a functional-wise view of the DPU sub-blocks and their parameters.

[./VPUIP/_ops_interfaces.md]

[TOC]

## Type constraint definition

### VPUIPDPU Invariant Type
This object represents closely a DPU Invariant
## Operation definition

### `VPUIPDPU.DPUInvariant` (vpux::VPUIPDPU::DPUInvariant)

DPU Invariant configuration


Syntax:

```
operation ::= `VPUIPDPU.DPUInvariant` `weight_table` `(` $weight_table `:` type($weight_table) `)`
              `out_activations` `(` $out_activations `:` type($out_activations) `)`
              (`sparsity_map` `(` $sparsity_map^ `:` type($sparsity_map) `)`)?
              attr-dict
              $region
```


Traits: NoTerminator

Interfaces: InferTypeOpInterface

#### Operands:

| Operand | Description |
| :-----: | ----------- |
| `weight_table` | memref of any type values
| `out_activations` | memref of any type values
| `sparsity_map` | memref of any type values

#### Results:

| Result | Description |
| :----: | ----------- |
| `invariant` | VPUIPDPU Invariant Type

### `VPUIPDPU.DPUVariant` (vpux::VPUIPDPU::DPUVariant)

DPU Variant configuration


Syntax:

```
operation ::= `VPUIPDPU.DPUVariant` `invariant` `(` $invariant `)`
              attr-dict
              $region
```


Traits: NoTerminator

#### Operands:

| Operand | Description |
| :-----: | ----------- |
| `invariant` | VPUIPDPU Invariant Type

### `VPUIPDPU.IDUCfg` (vpux::VPUIPDPU::IDUCfgOp)

IDU configuration


Syntax:

```
operation ::= `VPUIPDPU.IDUCfg` attr-dict
```


Traits: HasParent<vpux::VPUIPDPU::DPUInvariant>

### `VPUIPDPU.MPEActivationBias` (vpux::VPUIPDPU::MPEActivationBiasOp)

MPE set activation bias for U8 or I8 input op


Syntax:

```
operation ::= `VPUIPDPU.MPEActivationBias` `act_bias` `(` $act_bias `)`
              attr-dict
```

Used for asymetric integer quantization.
The bias value (zero point) is treated as U8 if input is U8 or I8 if input is I8.
Thus the op will restrict the bias value as such.
For all other data types it is disregarded.

Traits: HasParent<vpux::VPUIPDPU::MPECfgOp>

#### Attributes:

| Attribute | MLIR Type | Description |
| :-------: | :-------: | ----------- |
| `act_bias` | mlir::IntegerAttr | Integer attribute

### `VPUIPDPU.MPECfg` (vpux::VPUIPDPU::MPECfgOp)

MPE configuration


Syntax:

```
operation ::= `VPUIPDPU.MPECfg` attr-dict
              $region
```


Traits: HasParent<vpux::VPUIPDPU::DPUInvariant>, NoTerminator

### `VPUIPDPU.MPEDenormalOperandsFTZ` (vpux::VPUIPDPU::MPEDenormalOperandsFTZOp)

MPE force denormal operands to zero op


Syntax:

```
operation ::= `VPUIPDPU.MPEDenormalOperandsFTZ` attr-dict
```


Traits: HasParent<vpux::VPUIPDPU::MPECfgOp>

### `VPUIPDPU.MPEWeightsBias` (vpux::VPUIPDPU::MPEWeightsBiasOp)

MPE set weights bias for U8 or I8 input op


Syntax:

```
operation ::= `VPUIPDPU.MPEWeightsBias` `weights_bias` `(` $weights_bias `)`
              attr-dict
```

Used for asymetric integer quantization.
The bias value (zero point) is treated as U8 if input is U8 or I8 if input is I8.
Thus the op will restrict the bias value as such.
For all other data types it is disregarded.

Traits: HasParent<vpux::VPUIPDPU::MPECfgOp>

#### Attributes:

| Attribute | MLIR Type | Description |
| :-------: | :-------: | ----------- |
| `weights_bias` | mlir::IntegerAttr | Integer attribute

### `VPUIPDPU.ODUCast` (vpux::VPUIPDPU::ODUCastOp)

ODU cast config.


Syntax:

```
operation ::= `VPUIPDPU.ODUCast` `cast_output` `(` $cast_output `:` type($cast_output) `)`
              attr-dict
```


Traits: HasParent<vpux::VPUIPDPU::ODUCfgOp>, VPUIPDPU_ArchKindVPUX37XX

#### Operands:

| Operand | Description |
| :-----: | ----------- |
| `cast_output` | memref of any type values

### `VPUIPDPU.ODUCfg` (vpux::VPUIPDPU::ODUCfgOp)

ODU configuration


Syntax:

```
operation ::= `VPUIPDPU.ODUCfg` attr-dict
              $region
```


Traits: HasParent<vpux::VPUIPDPU::DPUInvariant>, NoTerminator

### `VPUIPDPU.ODUDataReuse` (vpux::VPUIPDPU::ODUDataReuseOp)

ODU data type


Syntax:

```
operation ::= `VPUIPDPU.ODUDataReuse` `activation_reuse` `(` $activation_reuse `)`
              attr-dict
```


Traits: HasParent<vpux::VPUIPDPU::ODUCfgOp>

#### Attributes:

| Attribute | MLIR Type | Description |
| :-------: | :-------: | ----------- |
| `activation_reuse` | vpux::VPUIPDPU::ODUActivationReuseModeAttr | ODU activation reuse mode

### `VPUIPDPU.ODUMemoryMode` (vpux::VPUIPDPU::ODUMemoryModeOp)

ODU memory mode config.


Syntax:

```
operation ::= `VPUIPDPU.ODUMemoryMode` `mem_mode` `(` $mem_mode `)`
              attr-dict
```


Traits: HasParent<vpux::VPUIPDPU::ODUCfgOp>

#### Attributes:

| Attribute | MLIR Type | Description |
| :-------: | :-------: | ----------- |
| `mem_mode` | vpux::VPUIPDPU::ODUMemoryModeAttr | ODU memory data mode

### `VPUIPDPU.ODUOutActivations` (vpux::VPUIPDPU::ODUOutActivationsOp)

ODU activations output config.


Syntax:

```
operation ::= `VPUIPDPU.ODUOutActivations` `out_activations` `(` $out_activations `:` type($out_activations) `)`
              (`data_type` `(` $data_type^ `)`)?
              attr-dict
```

Data type specification:
| attr name  | value range                                | vpu arch |
|:-----------|:-------------------------------------------|:---------|
| data_type  | fp16, u8f, g8, i8, i32, i4, i2, log, bin   | VPU2.7   |
If data_type is not specified then ODU output data type should be inferred from %out_activations.

Traits: HasParent<vpux::VPUIPDPU::ODUCfgOp>

#### Attributes:

| Attribute | MLIR Type | Description |
| :-------: | :-------: | ----------- |
| `data_type` | vpux::VPUIPDPU::ODUDataTypesAttr | ODU output data types - VPU2.7

#### Operands:

| Operand | Description |
| :-----: | ----------- |
| `out_activations` | memref of any type values

### `VPUIPDPU.ODUOutSubtensor` (vpux::VPUIPDPU::ODUOutSubtensorOp)

ODU output subtensor descriptor - begin and end coordinates


Syntax:

```
operation ::= `VPUIPDPU.ODUOutSubtensor` `begin_coord_x` `(` $begin_coord_x `)`
              `begin_coord_y` `(` $begin_coord_y `)`
              `begin_coord_z` `(` $begin_coord_z `)`
              `end_coord_x` `(` $end_coord_x `)`
              `end_coord_y` `(` $end_coord_y `)`
              `end_coord_z` `(` $end_coord_z `)`
              attr-dict
```


Traits: HasParent<vpux::VPUIPDPU::DPUVariant>

#### Attributes:

| Attribute | MLIR Type | Description |
| :-------: | :-------: | ----------- |
| `begin_coord_x` | mlir::IntegerAttr | Integer attribute
| `begin_coord_y` | mlir::IntegerAttr | Integer attribute
| `begin_coord_z` | mlir::IntegerAttr | Integer attribute
| `end_coord_x` | mlir::IntegerAttr | Integer attribute
| `end_coord_y` | mlir::IntegerAttr | Integer attribute
| `end_coord_z` | mlir::IntegerAttr | Integer attribute

### `VPUIPDPU.ODUOutTensorSize` (vpux::VPUIPDPU::ODUOutTensorSizeOp)

ODU output tensor dimensions


Syntax:

```
operation ::= `VPUIPDPU.ODUOutTensorSize` `dim_x` `(` $dim_x `)`
              `dim_y` `(` $dim_y `)`
              `dim_z` `(` $dim_z `)`
              attr-dict
```


Traits: HasParent<vpux::VPUIPDPU::ODUCfgOp>

#### Attributes:

| Attribute | MLIR Type | Description |
| :-------: | :-------: | ----------- |
| `dim_x` | mlir::IntegerAttr | Integer attribute
| `dim_y` | mlir::IntegerAttr | Integer attribute
| `dim_z` | mlir::IntegerAttr | Integer attribute

### `VPUIPDPU.ODUPermuteData` (vpux::VPUIPDPU::ODUPermuteDataOp)

ODU data permutation mode


Syntax:

```
operation ::= `VPUIPDPU.ODUPermuteData` `permute_mode` `(` $permute_mode `)`
              attr-dict
```


Traits: HasParent<vpux::VPUIPDPU::ODUCfgOp>

#### Attributes:

| Attribute | MLIR Type | Description |
| :-------: | :-------: | ----------- |
| `permute_mode` | vpux::VPUIPDPU::ODUPermuteDataModeAttr | ODU data permutation mode

### `VPUIPDPU.ODUSparsity` (vpux::VPUIPDPU::ODUSparsityOp)

ODU data sparsity config.


Syntax:

```
operation ::= `VPUIPDPU.ODUSparsity` ($sparsity_map^ `:` type($sparsity_map))?
              (`compression_enabled` `(` $compression_enabled^ `)`)?
              (`sparse_value` `(` $sparse_value^ `)`)?
              attr-dict
```

The default behaviour regarding sparsity (in case this op is not specified in the IR):
write_sp = 0, sp_out_en = 0 → dense activation written to ac_base; no sparsity output

Valid combinations of params:
| sparsity_map      | compression_enabled | sparse_value      | Behaviour                                                                                                    |
|:------------------|:--------------------|:------------------|:-------------------------------------------------------------------------------------------------------------|
| param present     | param not present   | param optional    | write_sp = 1, sp_out_en = 1 → sparse activation written to ac_base; sparsity map written to sp_base          |
| param present     | eq FALSE            | param not present | write_sp = 1, sp_out_en = 0 → dense activation written to ac_base; "dummy" sparsity map written to sp_base |
| param present     | eq TRUE             | param optional    | write_sp = 1, sp_out_en = 1 → sparse activation written to ac_base; sparsity map written to sp_base          |
| param not present | eq TRUE             | param optional    | write_sp = 0, sp_out_en = 1 → sparse activation written to ac_base; no sparsity output                       |

sparse_value is used by the ODU to determine sparsity

Traits: HasParent<vpux::VPUIPDPU::ODUCfgOp>

#### Attributes:

| Attribute | MLIR Type | Description |
| :-------: | :-------: | ----------- |
| `compression_enabled` | ::mlir::BoolAttr | bool attribute
| `sparse_value` | mlir::IntegerAttr | Integer attribute

#### Operands:

| Operand | Description |
| :-----: | ----------- |
| `sparsity_map` | memref of any type values

### `VPUIPDPU.ODUSwizzleData` (vpux::VPUIPDPU::ODUSwizzleDataOp)

ODU swizzle write out data config.


Syntax:

```
operation ::= `VPUIPDPU.ODUSwizzleData` `swizzle_key` `(` $swizzle_key `)`
              attr-dict
```


Traits: HasParent<vpux::VPUIPDPU::ODUCfgOp>

#### Attributes:

| Attribute | MLIR Type | Description |
| :-------: | :-------: | ----------- |
| `swizzle_key` | vpux::VPUIPDPU::ODUSwizzleKeyAttr | ODU out data swizzle key config.

### `VPUIPDPU.PPECfg` (vpux::VPUIPDPU::PPECfgOp)

PPE configuration


Syntax:

```
operation ::= `VPUIPDPU.PPECfg` attr-dict
              $region
```


Traits: HasParent<vpux::VPUIPDPU::DPUInvariant>, NoTerminator

### `VPUIPDPU.PPEFpAddMultBypass` (vpux::VPUIPDPU::PPEFpAddMultBypassOp)

PPE floating point pipeline bypass add and mult steps


Syntax:

```
operation ::= `VPUIPDPU.PPEFpAddMultBypass` `bypass_mode` `(` $bypass_mode `)`
              attr-dict
```


Traits: HasParent<vpux::VPUIPDPU::PPECfgOp>

#### Attributes:

| Attribute | MLIR Type | Description |
| :-------: | :-------: | ----------- |
| `bypass_mode` | vpux::VPUIPDPU::PPEBypassModeAttr | PPE bypass mode

### `VPUIPDPU.PPEFpBiasAdd` (vpux::VPUIPDPU::PPEFpBiasAddOp)

PPE floating point pipeline bias addition


Syntax:

```
operation ::= `VPUIPDPU.PPEFpBiasAdd` ($scale_table^ `:` type($scale_table))?
              (`bias_static` `(` $bias_static^ `)`)?
              attr-dict
```


Traits: HasParent<vpux::VPUIPDPU::PPECfgOp>

#### Attributes:

| Attribute | MLIR Type | Description |
| :-------: | :-------: | ----------- |
| `bias_static` | ::mlir::FloatAttr | 32-bit float attribute

#### Operands:

| Operand | Description |
| :-----: | ----------- |
| `scale_table` | memref of any type values

### `VPUIPDPU.PPEFpConvert` (vpux::VPUIPDPU::PPEFpConvertOp)

PPE floating point pipeline conversion


Syntax:

```
operation ::= `VPUIPDPU.PPEFpConvert` `convert_mode` `(` $convert_mode `)`
              (`clamp_mode` `(` $clamp_mode^ `)`)?
              (`ftz_mode` `(` $ftz_mode^ `)`)?
              (`bf16_round_mode` `(` $bf16_round_mode^ `)`)?
              attr-dict
```

Conversion modes and attributes <-> reg. fields relation:
| Convert fp32  to | Round mode     | Reg. for round | Clamp mode                  | Ftz mode                              | Reg. for clamp/ftz            |
|:-----------------|:---------------|:---------------|:----------------------------|:--------------------------------------|:------------------------------|
| none             | N/A            | N/A            | N/A                         | N/A                                   | N/A                           |
| fp16             | rne (implicit) | N/A            | no_clamp / clamp_to_min_max | support_denoms / force_denoms_to_zero | ppe_fp16_clamp / ppe_fp16_ftz |
| bf16             | trunc / rne    | ppe_bf16_round | N/A                         | N/A                                   | N/A                           |
| fp8              | rne (implicit) | N/A            | no_clamp / clamp_to_min_max | support_denoms / force_denoms_to_zero | ppe_fp16_clamp / ppe_fp16_ftz |
| i32              | rne (implicit) | N/A            | N/A                         | N/A                                   | N/A                           |

Traits: HasParent<vpux::VPUIPDPU::PPECfgOp>

#### Attributes:

| Attribute | MLIR Type | Description |
| :-------: | :-------: | ----------- |
| `convert_mode` | vpux::VPUIPDPU::PPEFpConvertModeAttr | PPE FP convert mode
| `clamp_mode` | vpux::VPUIPDPU::PPEFpConvClampModeAttr | PPE FP convert clamp mode
| `ftz_mode` | vpux::VPUIPDPU::PPEFpConvFTZModeAttr | PPE FP convert force-to-zero mode
| `bf16_round_mode` | vpux::VPUIPDPU::PPEFpConvBf16RoundModeAttr | PPE FP convert to BF16 round mode

### `VPUIPDPU.PPEFpScaleMult` (vpux::VPUIPDPU::PPEFpScaleMultOp)

PPE floating point pipeline scale multiplication


Syntax:

```
operation ::= `VPUIPDPU.PPEFpScaleMult` ($scale_table^ `:` type($scale_table))?
              (`scale_static` `(` $scale_static^ `)`)?
              (`prelu_alpha` `(` $prelu_alpha^ `)`)?
              attr-dict
```


Traits: HasParent<vpux::VPUIPDPU::PPECfgOp>

#### Attributes:

| Attribute | MLIR Type | Description |
| :-------: | :-------: | ----------- |
| `scale_static` | ::mlir::FloatAttr | 32-bit float attribute
| `prelu_alpha` | ::mlir::FloatAttr | 32-bit float attribute

#### Operands:

| Operand | Description |
| :-----: | ----------- |
| `scale_table` | memref of any type values

### `VPUIPDPU.PPEIntBiasAdd` (vpux::VPUIPDPU::PPEIntBiasAddOp)

PPE integer pipeline bias addition


Syntax:

```
operation ::= `VPUIPDPU.PPEIntBiasAdd` ($scale_table^ `:` type($scale_table))?
              (`bias_static` `(` $bias_static^ `)`)?
              attr-dict
```


Traits: HasParent<vpux::VPUIPDPU::PPECfgOp>

#### Attributes:

| Attribute | MLIR Type | Description |
| :-------: | :-------: | ----------- |
| `bias_static` | mlir::IntegerAttr | Integer attribute

#### Operands:

| Operand | Description |
| :-----: | ----------- |
| `scale_table` | memref of any type values

### `VPUIPDPU.PPEIntClamp` (vpux::VPUIPDPU::PPEIntClampOp)

PPE integer pipeline clamping


Syntax:

```
operation ::= `VPUIPDPU.PPEIntClamp` (`clamp_low` `(` $clamp_low^ `)`)?
              `clamp_high` `(` $clamp_high `)`
              attr-dict
```

In case PPE output is FP, only clamp_high is used by HW.
Therefore the clamp_low param is optional, to be used only on the integer output data path.

Traits: HasParent<vpux::VPUIPDPU::PPECfgOp>

#### Attributes:

| Attribute | MLIR Type | Description |
| :-------: | :-------: | ----------- |
| `clamp_low` | mlir::IntegerAttr | Integer attribute
| `clamp_high` | mlir::IntegerAttr | Integer attribute

### `VPUIPDPU.PPEIntConvert` (vpux::VPUIPDPU::PPEIntConvertOp)

PPE integer pipeline conversion


Syntax:

```
operation ::= `VPUIPDPU.PPEIntConvert` `convert_mode` `(` $convert_mode `)`
              attr-dict
```


Traits: HasParent<vpux::VPUIPDPU::PPECfgOp>

#### Attributes:

| Attribute | MLIR Type | Description |
| :-------: | :-------: | ----------- |
| `convert_mode` | vpux::VPUIPDPU::PPEIntConvertModeAttr | PPE Int convert mode

### `VPUIPDPU.PPEIntPreluMult` (vpux::VPUIPDPU::PPEIntPreluMultOp)

PPE integer pipeline prelu multiplicator


Syntax:

```
operation ::= `VPUIPDPU.PPEIntPreluMult` `prelu_mult_static` `(` $prelu_mult_static `)`
              attr-dict
```


Traits: HasParent<vpux::VPUIPDPU::PPECfgOp>

#### Attributes:

| Attribute | MLIR Type | Description |
| :-------: | :-------: | ----------- |
| `prelu_mult_static` | mlir::IntegerAttr | Integer attribute

### `VPUIPDPU.PPEIntPreluShift` (vpux::VPUIPDPU::PPEIntPreluShiftOp)

PPE integer pipeline prelu shift


Syntax:

```
operation ::= `VPUIPDPU.PPEIntPreluShift` `prelu_shift_static` `(` $prelu_shift_static `)`
              attr-dict
```


Traits: HasParent<vpux::VPUIPDPU::PPECfgOp>

#### Attributes:

| Attribute | MLIR Type | Description |
| :-------: | :-------: | ----------- |
| `prelu_shift_static` | mlir::IntegerAttr | Integer attribute

### `VPUIPDPU.PPEIntRound` (vpux::VPUIPDPU::PPEIntRoundOp)

PPE integer pipeline rounding mode


Syntax:

```
operation ::= `VPUIPDPU.PPEIntRound` `round_mode` `(` $round_mode `)`
              attr-dict
```


Traits: HasParent<vpux::VPUIPDPU::PPECfgOp>

#### Attributes:

| Attribute | MLIR Type | Description |
| :-------: | :-------: | ----------- |
| `round_mode` | vpux::VPUIPDPU::PPEIntRoundModeAttr | PPE Int round mode

### `VPUIPDPU.PPEIntScaleMult` (vpux::VPUIPDPU::PPEIntScaleMultOp)

PPE integer pipeline scale multiplication


Syntax:

```
operation ::= `VPUIPDPU.PPEIntScaleMult` ($scale_table^ `:` type($scale_table))?
              (`scale_static` `(` $scale_static^ `)`)?
              attr-dict
```


Traits: HasParent<vpux::VPUIPDPU::PPECfgOp>

#### Attributes:

| Attribute | MLIR Type | Description |
| :-------: | :-------: | ----------- |
| `scale_static` | mlir::IntegerAttr | Integer attribute

#### Operands:

| Operand | Description |
| :-----: | ----------- |
| `scale_table` | memref of any type values

### `VPUIPDPU.PPEIntScaleShift` (vpux::VPUIPDPU::PPEIntScaleShiftOp)

PPE integer pipeline scale shift


Syntax:

```
operation ::= `VPUIPDPU.PPEIntScaleShift` ($scale_table^ `:` type($scale_table))?
              (`shift_static` `(` $shift_static^ `)`)?
              attr-dict
```


Traits: HasParent<vpux::VPUIPDPU::PPECfgOp>

#### Attributes:

| Attribute | MLIR Type | Description |
| :-------: | :-------: | ----------- |
| `shift_static` | mlir::IntegerAttr | Integer attribute

#### Operands:

| Operand | Description |
| :-----: | ----------- |
| `scale_table` | memref of any type values

### `VPUIPDPU.PPEIntZeroPointOffset` (vpux::VPUIPDPU::PPEIntZeroPointOffsetOp)

PPE integer pipeline zero point


Syntax:

```
operation ::= `VPUIPDPU.PPEIntZeroPointOffset` `zero_point_static` `(` $zero_point_static `)`
              attr-dict
```


Traits: HasParent<vpux::VPUIPDPU::PPECfgOp>

#### Attributes:

| Attribute | MLIR Type | Description |
| :-------: | :-------: | ----------- |
| `zero_point_static` | mlir::IntegerAttr | Integer attribute

## Type definition

### InvariantType

VPUIPDPU Invariant Type

This object represents closely a DPU Invariant
