<!-- Autogenerated by mlir-tblgen; don't manually edit -->
# 'VPU' Dialect

VPU high-level ISA Dialect
The **VPU Dialect** represents high level ISA for VPU architectures.

It is type compatible with **IE Dialect**, implements its interfaces and can be used along side with it.
The operations in the **VPU Dialect** are pure functional and works on tensor level.

[TOC]

## Type constraint definition

### VPU tensor type to describe the tensor tiling
This type of tensor is used together with the ClusterTiling operation
                           to describe a tile operation between clusters
## Operation definition

### `VPU.DPU.Workload` (vpux::VPU::DPUWorkloadOp)

Workload for a single DPU tile


Syntax:

```
operation ::= `VPU.DPU.Workload` $offsets $sizes $pad $mpe_mode attr-dict-with-keyword
```


#### Attributes:

| Attribute | MLIR Type | Description |
| :-------: | :-------: | ----------- |
`offsets` | ::mlir::ArrayAttr | 64-bit integer array attribute with exactly 4 elements
`sizes` | ::mlir::ArrayAttr | 64-bit integer array attribute with exactly 4 elements
`pad` | vpux::VPU::PaddingAttr | DictionaryAttr with field(s): 'left', 'right', 'top', 'bottom' (each field having its own constraints)
`mpe_mode` | vpux::VPU::MPEModeAttr | MPE Mode
`cluster_id` | mlir::IntegerAttr | Integer attribute

### `VPU.DistributedCast` (vpux::VPU::DistributedCastOp)

Operation that casts one DistributedTensor type to another.


Syntax:

```
operation ::= `VPU.DistributedCast` `(` $input `:` type($input) `)`
              attr-dict
              `->` type($output)
```

Used to cast one DistributedTensor type to another and help with NNCMX retention
of data.

Currently following distribution mode pairs are compatible:

DUPLICATED|SEGMENTED -> DUPLICATED ## needed for K cluster tiling

#### Operands:

| Operand | Description |
| :-----: | ----------- |
`input` | VPU tensor type to describe the tensor tiling

#### Results:

| Result | Description |
| :----: | ----------- |
`output` | VPU tensor type to describe the tensor tiling

### `VPU.NCE.ClusterTiling` (vpux::VPU::NCEClusterTilingOp)

Operation that encapsulates details of tiling operation between clusters


#### Operands:

| Operand | Description |
| :-----: | ----------- |
`operands` | 4D tensor of 16-bit float or bfloat16 type or 32-bit signed integer or 8-bit unsigned integer or QuantizedType values or VPU tensor type to describe the tensor tiling

#### Results:

| Result | Description |
| :----: | ----------- |
`results` | 4D tensor of 16-bit float or bfloat16 type or 32-bit signed integer or 8-bit unsigned integer or QuantizedType values or VPU tensor type to describe the tensor tiling

### `VPU.NCE.Convolution` (vpux::VPU::NCEConvolutionOp)

NCE version of Convolution layer


Syntax:

```
operation ::= `VPU.NCE.Convolution` `(` $input `,` $filter `,` $weightsTable (`,` $activationWindow^ custom<OptionalTypes>(type($activationWindow)) ``)?
              (`,` $instructionListTable^ custom<OptionalTypes>(type($instructionListTable)) ``)? `)`
              attr-dict
              custom<OptionalTypes>(type($input), type($filter), type($weightsTable)) ``
              `->` type(results)
              custom<OptionalRegion>($workloads)
```


#### Attributes:

| Attribute | MLIR Type | Description |
| :-------: | :-------: | ----------- |
`strides` | ::mlir::ArrayAttr | 64-bit integer array attribute with exactly 2 elements
`pad` | vpux::VPU::PaddingAttr | DictionaryAttr with field(s): 'left', 'right', 'top', 'bottom' (each field having its own constraints)
`ppe` | vpux::VPU::PPETaskAttr | DictionaryAttr with field(s): 'mode', 'clamp_low', 'clamp_high', 'lrelu_mult', 'lrelu_shift', 'quant_mult', 'quant_shift', 'quant_post_shift' (each field having its own constraints)
`rawFilterShape` | ::mlir::ArrayAttr | 64-bit integer array attribute with exactly 4 elements
`activation_window_channel_length` | mlir::IntegerAttr | Integer attribute

#### Operands:

| Operand | Description |
| :-----: | ----------- |
`input` | 4D tensor of 16-bit float or bfloat16 type or QuantizedType values
`filter` | 4D tensor of 16-bit float or bfloat16 type or QuantizedType values
`weightsTable` | 4D tensor of 32-bit signed integer values
`instructionListTable` | 4D tensor of 32-bit signed integer values
`activationWindow` | 4D tensor of 8-bit unsigned integer values

#### Results:

| Result | Description |
| :----: | ----------- |
`output` | 4D tensor of 16-bit float or bfloat16 type or QuantizedType values

### `VPU.NCE.DepthConvolution` (vpux::VPU::NCEDepthConvolutionOp)

NCE version of Depthwise Convolution layer


Syntax:

```
operation ::= `VPU.NCE.DepthConvolution` `(` $input `,` $filter `,` $weightsTable `,` $activationWindow `)`
              (`,` $instructionListTable^ custom<OptionalTypes>(type($instructionListTable)) ``)? `)`
              attr-dict
              custom<OptionalTypes>(type($input), type($filter), type($weightsTable), type($activationWindow)) ``
              `->` type(results)
              custom<OptionalRegion>($workloads)
```


#### Attributes:

| Attribute | MLIR Type | Description |
| :-------: | :-------: | ----------- |
`strides` | ::mlir::ArrayAttr | 64-bit integer array attribute with exactly 2 elements
`pad` | vpux::VPU::PaddingAttr | DictionaryAttr with field(s): 'left', 'right', 'top', 'bottom' (each field having its own constraints)
`ppe` | vpux::VPU::PPETaskAttr | DictionaryAttr with field(s): 'mode', 'clamp_low', 'clamp_high', 'lrelu_mult', 'lrelu_shift', 'quant_mult', 'quant_shift', 'quant_post_shift' (each field having its own constraints)
`rawFilterShape` | ::mlir::ArrayAttr | 64-bit integer array attribute with exactly 4 elements
`activation_window_channel_length` | mlir::IntegerAttr | Integer attribute

#### Operands:

| Operand | Description |
| :-----: | ----------- |
`input` | 4D tensor of 16-bit float or bfloat16 type or QuantizedType values
`filter` | 4D tensor of 16-bit float or bfloat16 type or QuantizedType values
`weightsTable` | 4D tensor of 32-bit signed integer values
`instructionListTable` | 4D tensor of 32-bit signed integer values
`activationWindow` | 4D tensor of 8-bit unsigned integer values

#### Results:

| Result | Description |
| :----: | ----------- |
`output` | 4D tensor of 16-bit float or bfloat16 type or QuantizedType values

### `VPU.NCE.Eltwise` (vpux::VPU::NCEEltwiseOp)

NCE version of Eltwise layer


Syntax:

```
operation ::= `VPU.NCE.Eltwise` `(` $input1 `,` $input2 `)`
              attr-dict
              custom<OptionalTypes>(type($input1), type($input2)) ``
              `->` type(results)
              custom<OptionalRegion>($workloads)
```


#### Attributes:

| Attribute | MLIR Type | Description |
| :-------: | :-------: | ----------- |
`op_type` | vpux::VPU::EltwiseTypeAttr | Type of Eltwise operation
`ppe` | vpux::VPU::PPETaskAttr | DictionaryAttr with field(s): 'mode', 'clamp_low', 'clamp_high', 'lrelu_mult', 'lrelu_shift', 'quant_mult', 'quant_shift', 'quant_post_shift' (each field having its own constraints)

#### Operands:

| Operand | Description |
| :-----: | ----------- |
`input1` | 4D tensor of 16-bit float or bfloat16 type or QuantizedType values
`input2` | 4D tensor of 16-bit float or bfloat16 type or QuantizedType values

#### Results:

| Result | Description |
| :----: | ----------- |
`output` | 4D tensor of 16-bit float or bfloat16 type or QuantizedType values

### `VPU.NCE.MaxPool` (vpux::VPU::NCEMaxPoolOp)

NCE version of MaxPool layer


Syntax:

```
operation ::= `VPU.NCE.MaxPool` `(` $input `,` $weightsTable `,` $activationWindow `)`
              (`,` $instructionListTable^ custom<OptionalTypes>(type($instructionListTable)) ``)? `)`
              attr-dict
              custom<OptionalTypes>(type($input), type($weightsTable), type($activationWindow)) ``
              `->` type(results)
              custom<OptionalRegion>($workloads)
```


#### Attributes:

| Attribute | MLIR Type | Description |
| :-------: | :-------: | ----------- |
`kernel_size` | ::mlir::ArrayAttr | 64-bit integer array attribute with exactly 2 elements
`strides` | ::mlir::ArrayAttr | 64-bit integer array attribute with exactly 2 elements
`pad` | vpux::VPU::PaddingAttr | DictionaryAttr with field(s): 'left', 'right', 'top', 'bottom' (each field having its own constraints)
`ppe` | vpux::VPU::PPETaskAttr | DictionaryAttr with field(s): 'mode', 'clamp_low', 'clamp_high', 'lrelu_mult', 'lrelu_shift', 'quant_mult', 'quant_shift', 'quant_post_shift' (each field having its own constraints)
`activation_window_channel_length` | mlir::IntegerAttr | Integer attribute

#### Operands:

| Operand | Description |
| :-----: | ----------- |
`input` | 4D tensor of 16-bit float or bfloat16 type or QuantizedType values
`weightsTable` | 4D tensor of 32-bit signed integer values
`instructionListTable` | 4D tensor of 32-bit signed integer values
`activationWindow` | 4D tensor of 8-bit unsigned integer values

#### Results:

| Result | Description |
| :----: | ----------- |
`output` | 4D tensor of 16-bit float or bfloat16 type or QuantizedType values

### `VPU.Yield` (vpux::VPU::YieldOp)

Terminator for NCE.ClusterTiling operation


Syntax:

```
operation ::= `VPU.Yield` $operands
              custom<OptionalTypes>(type($operands)) ``
              attr-dict
```


#### Operands:

| Operand | Description |
| :-----: | ----------- |
`operands` | 4D tensor of 16-bit float or bfloat16 type or 32-bit signed integer or 8-bit unsigned integer or QuantizedType values

## Type definition

### DistributedTensorType

VPU tensor type to describe the tensor tiling

This type of tensor is used together with the ClusterTiling operation
                           to describe a tile operation between clusters
#### Parameters:

| Parameter | C++ type | Description |
| :-------: | :-------: | ----------- |
| shape | `::llvm::ArrayRef<int64_t>` |  |
| elementType | `mlir::Type` |  |
| order | `mlir::AffineMapAttr` |  |
| memSpace | `vpux::IndexedSymbolAttr` |  |
| distribution | `DistributedTensorAttr` |  |

