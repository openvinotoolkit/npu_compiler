<!-- Autogenerated by mlir-tblgen; don't manually edit -->
# 'VPUIPRegMapped' Dialect

VPU NN Register Mapped RunTime Dialect
The **VPUIPRegMapped Dialect** represents NN RunTime IR in terms of MLIR framework.

It allows to work with the graph schema inside MLIR framework:

* Validate it.
* Perform additional low level transformations/optimizations.

It handles such VPU-specifics as:

* Memory/executors hierarchy.
* HW barriers notion.
* Supported operation set.

[./VPUIPRegMapped/_ops_interfaces.md]

[TOC]

## Operation definition

### `VPUIPRegMapped.ConfigureBarrier` (vpux::VPUIPRegMapped::ConfigureBarrierOp)

A task to configure the setup for a barrier


Syntax:

```
operation ::= `VPUIPRegMapped.ConfigureBarrier` attr-dict
              `<` $id `,` $next_same_id `>`
              (`waits` `(` $waitBarriers^ `:` type($waitBarriers) `)`)?
              (`updates` `(` $updateBarriers^ `:` type($updateBarriers) `)`)?
              `->` type(results)
```


#### Attributes:

| Attribute | MLIR Type | Description |
| :-------: | :-------: | ----------- |
`id` | ::mlir::IntegerAttr | 8-bit signless integer attribute
`next_same_id` | ::mlir::IntegerAttr | 32-bit signless integer attribute
`producer_count` | ::mlir::IntegerAttr | 8-bit unsigned integer attribute
`consumer_count` | ::mlir::IntegerAttr | 8-bit unsigned integer attribute

#### Operands:

| Operand | Description |
| :-----: | ----------- |
`waitBarriers` | VPUIP Barrier Type
`updateBarriers` | VPUIP Barrier Type

#### Results:

| Result | Description |
| :----: | ----------- |
`barrier` | VPUIP Barrier Type

### `VPUIPRegMapped.DPUTask` (vpux::VPUIPRegMapped::DPUTaskOp)

This object represents workload for a single DPU tile


Syntax:

```
operation ::= `VPUIPRegMapped.DPUTask` attr-dict
```


#### Attributes:

| Attribute | MLIR Type | Description |
| :-------: | :-------: | ----------- |
`start` | ::mlir::ArrayAttr | 64-bit integer array attribute
`end` | ::mlir::ArrayAttr | 64-bit integer array attribute
`pad` | vpux::VPUIPRegMapped::PaddingAttr | DictionaryAttr with field(s): 'left', 'right', 'top', 'bottom' (each field having its own constraints)
`mpe_mode` | vpux::VPUIPRegMapped::MPEModeAttr | MPE Mode

### `VPUIPRegMapped.DeclareVirtualBarrier` (vpux::VPUIPRegMapped::DeclareVirtualBarrierOp)

VPUIPRegMapped virtual Barrier declaration


Syntax:

```
operation ::= `VPUIPRegMapped.DeclareVirtualBarrier` attr-dict `->` type(results)
```


#### Results:

| Result | Description |
| :----: | ----------- |
`barrier` | VPUIP Barrier Type

### `VPUIPRegMapped.Empty` (vpux::VPUIPRegMapped::EmptyOp)

Empty op


Syntax:

```
operation ::= `VPUIPRegMapped.Empty` attr-dict
              (`waits` `(` $waitBarriers^ `:` type($waitBarriers) `)`)?
              (`updates` `(` $updateBarriers^ `:` type($updateBarriers) `)`)?
```


#### Operands:

| Operand | Description |
| :-----: | ----------- |
`waitBarriers` | VPUIP Barrier Type
`updateBarriers` | VPUIP Barrier Type

### `VPUIPRegMapped.Graph` (vpux::VPUIPRegMapped::GraphOp)

The root object for the VPUIPRegMapped Execution Graph


Syntax:

```
operation ::= `VPUIPRegMapped.Graph` attr-dict
              `options` `:` $options
              `version` `:` $version
```


#### Attributes:

| Attribute | MLIR Type | Description |
| :-------: | :-------: | ----------- |
`options` | vpux::VPUIPRegMapped::ExecutionFlagAttr | Each of these enums' presence informs how the current schedule is configured
`version` | vpux::VPUIPRegMapped::VersionAttr | DictionaryAttr with field(s): 'majorV', 'minorV', 'patchV', 'hash', 'contextStr' (each field having its own constraints)

### `VPUIPRegMapped.MappedInference` (vpux::VPUIPRegMapped::MappedInferenceOp)

Task representing the single mappedInference op


Syntax:

```
operation ::= `VPUIPRegMapped.MappedInference` attr-dict
              (`dmas` `(` $dmaList^ `:` type($dmaList) `)`)?
              (`invariants` `(` $invariantList^ `:` type($invariantList) `)`)?
              (`variants` `(` $variantList^ `:` type($variantList) `)`)?
              (`actInvocations` `(` $actInvocations^ `:` type($actInvocations) `)`)?
              (`barriers` `(` $barrierList^ `:` type($barrierList) `)` )?
              `dmaCount` `(` $dmaCount `)`
              `invariantCount` `(` $invariantCount `)`
              `variantCount` `(` $variantCount `)`
              `actInvocationsCount` `(` $actInvocationsCount `)`
              `barrierCount` `(` $barrierCount `)`
```


#### Attributes:

| Attribute | MLIR Type | Description |
| :-------: | :-------: | ----------- |
`dmaCount` | ::mlir::IntegerAttr | 32-bit unsigned integer attribute
`invariantCount` | ::mlir::IntegerAttr | 32-bit unsigned integer attribute
`variantCount` | ::mlir::IntegerAttr | 32-bit unsigned integer attribute
`actInvocationsCount` | ::mlir::IntegerAttr | 32-bit unsigned integer attribute
`barrierCount` | ::mlir::IntegerAttr | 32-bit unsigned integer attribute

#### Operands:

| Operand | Description |
| :-----: | ----------- |
`dmaList` | memref of any type values
`invariantList` | memref of any type values
`variantList` | memref of any type values
`actInvocations` | memref of any type values
`barrierList` | VPUIP Barrier Type

#### Results:

| Result | Description |
| :----: | ----------- |
`output` | index

### `VPUIPRegMapped.NCEClusterTask` (vpux::VPUIPRegMapped::NCEClusterTaskOp)

NCE Cluster Task Operation


Syntax:

```
operation ::= `VPUIPRegMapped.NCEClusterTask` attr-dict
              `input` `(` $input  `:` type($input) `)`
              (`weights` `(` $weights^  `:` type($weights) `)`)?
              (`weight_table` `(` $weight_table^  `:` type($weight_table) `)`)?
              (`activation_window` `(` $activation_window^  `:` type($activation_window) `)`)?
              `parent_input` `(` $parent_input `:` type($parent_input) `)`
              `parent_output` `(` $parent_output `:` type($parent_output) `)`
              `outputs` `(` $output_buff `:` type($output_buff) `)`
              (`waits` `(` $waitBarriers^ `:` type($waitBarriers) `)`)?
              (`updates` `(` $updateBarriers^ `:` type($updateBarriers) `)`)?
              `->` type(results)
              `variants` `:` $variants
              `PPE` `:` $ppe
```

This operation defines NCE cluster task which describes single cluster of 5 DPUs. It is
comprised of two argument categories:

* Variants - describes the attributes for an individual DPU within the cluster.
* Invariants - describes the collective attributes of the cluster.

The variants argument takes on a region argument and up to 5 DPUTaskOps. The invariants
take on a variety of argument types.

The NCEClusterTaskOp also supports fixed PPE functions as well as generic PPE instruction
lists. The generic PPE instruction list argument needs to be described as a region of PPE
supported ops. Single fixed PPE functions and generic PPE instruciton list usage is
mutually exclusive.

#### Attributes:

| Attribute | MLIR Type | Description |
| :-------: | :-------: | ----------- |
`task_type` | vpux::VPUIPRegMapped::NCETaskTypeAttr | NCE task type
`kernel_size` | ::mlir::ArrayAttr | 64-bit integer array attribute
`kernel_strides` | ::mlir::ArrayAttr | 64-bit integer array attribute
`kernel_padding` | ::mlir::ArrayAttr | 64-bit integer array attribute
`activation_window_channel_length` | mlir::IntegerAttr | Integer attribute
`is_continued` | ::mlir::UnitAttr | unit attribute

#### Operands:

| Operand | Description |
| :-----: | ----------- |
`input` | memref of 16-bit float or QuantizedType values
`weights` | memref of 16-bit float or QuantizedType values
`weight_table` | memref of 32-bit signed integer values
`activation_window` | memref of 8-bit unsigned integer values
`parent_input` | memref of any type values
`parent_output` | memref of any type values
`output_buff` | memref of 16-bit float or QuantizedType values
`waitBarriers` | VPUIP Barrier Type
`updateBarriers` | VPUIP Barrier Type

#### Results:

| Result | Description |
| :----: | ----------- |
`output` | memref of 16-bit float or QuantizedType values

### `VPUIPRegMapped.NNDMA` (vpux::VPUIPRegMapped::NNDMAOp)

NN DMA task


Syntax:

```
operation ::= `VPUIPRegMapped.NNDMA` attr-dict
              `inputs` `(` $input `:` type($input) `)`
              `outputs` `(` $output_buff `:` type($output_buff) `)`
              (`waits` `(` $waitBarriers^ `:` type($waitBarriers) `)`)?
              (`updates` `(` $updateBarriers^ `:` type($updateBarriers) `)`)?
              `start_after` `(` $start_after `)`
              `->` type(results)
```


#### Attributes:

| Attribute | MLIR Type | Description |
| :-------: | :-------: | ----------- |
`compression` | ::mlir::UnitAttr | unit attribute
`port` | mlir::IntegerAttr | Integer attribute
`start_after` | ::mlir::IntegerAttr | 64-bit unsigned integer attribute

#### Operands:

| Operand | Description |
| :-----: | ----------- |
`input` | memref of any type values
`output_buff` | memref of any type values
`waitBarriers` | VPUIP Barrier Type
`updateBarriers` | VPUIP Barrier Type

#### Results:

| Result | Description |
| :----: | ----------- |
`output` | memref of any type values

### `VPUIPRegMapped.PPETask` (vpux::VPUIPRegMapped::PPETaskOp)

PPE Type for NCE Task


Syntax:

```
operation ::= `VPUIPRegMapped.PPETask` $ppe_layer_type attr-dict
```


#### Attributes:

| Attribute | MLIR Type | Description |
| :-------: | :-------: | ----------- |
`ppe_layer_type` | vpux::VPUIPRegMapped::PPELayerTypeAttr | Post Processing Element Type
`clamp_low` | mlir::IntegerAttr | Integer attribute
`clamp_high` | mlir::IntegerAttr | Integer attribute
`lrelu_mult` | mlir::IntegerAttr | Integer attribute
`lrelu_shift` | mlir::IntegerAttr | Integer attribute

### `VPUIPRegMapped.WeightsTableOp` (vpux::VPUIPRegMapped::WeightsTableOp)

Intermediate task for creating weights table based on the addresses of CMX buffers


Syntax:

```
operation ::= `VPUIPRegMapped.WeightsTableOp` attr-dict
              (`op_input` `(` $op_input^  `:` type($op_input) `)`)?
              (`op_output` `(` $op_output^  `:` type($op_output) `)`)?
              (`weights` `(` $weights^  `:` type($weights) `)`)?
              (`bias` `(` $bias^  `:` type($bias) `)`)?
              (`activation_window` `(` $activation_window^  `:` type($activation_window) `)`)?
              `->` type(results)
```


#### Operands:

| Operand | Description |
| :-----: | ----------- |
`op_input` | memref of 16-bit float or QuantizedType values
`op_output` | memref of 16-bit float or QuantizedType values
`weights` | memref of 16-bit float or QuantizedType values
`bias` | memref of 16-bit float or 32-bit float values
`activation_window` | memref of 8-bit unsigned integer values

#### Results:

| Result | Description |
| :----: | ----------- |
`output` | memref of 32-bit signed integer values

